<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <title>Checkout - Seguidores</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <link href="/css/style.css?v=6" rel="stylesheet" />
  <link href="/css/badges.css" rel="stylesheet" />
  <link href="/css/perfil.css" rel="stylesheet" />
  <link href="/css/why-us.css?v=5" rel="stylesheet" />
  <link rel="icon" type="image/png" href="/images/logo.png" />
  <!-- Google Tag Manager --> 
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': 
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], 
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= 
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); 
  })(window,document,'script','dataLayer','GTM-MZD45RKD');</script> 
  <!-- End Google Tag Manager -->
  <!-- TRACK COMBO -->
  <script>
    (function() {
      var script = document.createElement("script");
      script.type = "text/javascript";
      script.async = true;
      script.src = "https://track.agenciaoppus.site/tag/TC-FQZRKRMP.js";
      var firstScript = document.getElementsByTagName("script")[0];
      firstScript.parentNode.insertBefore(script, firstScript);
    })();
  </script>
  <!-- End TRACK COMBO -->
  <!--
  <script>
    try { localStorage.removeItem('oppus_selected_oid'); } catch(_) {}
    (function(){
      var PIXEL_ID = '<%= PIXEL_ID %>';
      var isValid = !!PIXEL_ID && /^\d+$/.test(PIXEL_ID);
      if (!isValid) { window._oppusPixelReady = false; return; }
      !function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?
      n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;
      n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;
      t.src='https://connect.facebook.net/en_US/fbevents.js';s=b.getElementsByTagName(e)[0];
      s.parentNode.insertBefore(t,s)}(window, document,'script');
      fbq('init', PIXEL_ID);
      fbq('consent', 'grant');
      fbq('track', 'PageView');
      window._oppusPixelReady = true;
    })();
  </script>
  <% if (PIXEL_ID && /^\d+$/.test(PIXEL_ID)) { %>
    <noscript>
      <img height="1" width="1" style="display:none" src="https://www.facebook.com/tr?id=<%= PIXEL_ID %>&ev=PageView&noscript=1" />
    </noscript>
  <% } %>
  -->
</head>
<body class="theme-light has-fixed-menu page-instagram-services">
  <%- include('partials/menu') %>
  <script>window.__ENG_MODE__ = (location && location.pathname && location.pathname.indexOf('/engajamento') === 0);</script>
  <div class="container checkout-page">
    
    <main class="main-content">
      <!-- Stepper -->
      <div class="stepper-container">
        <div class="step active" id="step1" onclick="window.goToStep && window.goToStep(1)" style="cursor: pointer;">
          <div class="step-circle">1</div>
          <div class="step-label">Serviço</div>
        </div>
        <div class="step-line" id="line1"></div>
        <div class="step" id="step2" onclick="window.goToStep && window.goToStep(2)" style="cursor: pointer;">
          <div class="step-circle">2</div>
          <div class="step-label">Dados</div>
        </div>
        <div class="step-line" id="line2"></div>
        <div class="step" id="step3" onclick="window.goToStep && window.goToStep(3)" style="cursor: pointer;">
          <div class="step-circle">3</div>
          <div class="step-label">Pagamento</div>
        </div>
      </div>

      <section class="section-block">
        <div id="step1Container" class="cards-grid checkout-grid">
          
          <!-- Toggle de plataforma (Oculto, apenas para manter a lógica do JS funcionando) -->
          <div class="service-card" id="plataformaCard" style="display:none;">
            <div class="card-content">
              <h3 class="card-title">Plataforma</h3>
              <div class="card-desc">
                  <div class="platform-toggle" aria-label="Selecionar plataforma">
                  <button type="button" class="platform-btn instagram" aria-pressed="true" aria-label="Instagram">
                    <span>Instagram</span>
                  </button>
                  <button type="button" class="platform-btn tiktok" aria-pressed="false" aria-label="TikTok">
                    <span>TikTok</span>
                  </button>
                </div>
              </div>
            </div>
          </div>

          <!-- Desktop: seleção por cards de tipo -->
          <div id="tipoCards" class="option-cards" style="display:none;"></div>
          <!-- Descrição do serviço (após escolher tipo, antes dos preços) -->
          <div class="service-card" id="tipoDescCard" style="display:none;">
            <div class="card-content">
              <h3 class="card-title" id="tipoDescTitle"></h3>
              <div class="card-desc" id="tipoDescContent"></div>
            </div>
          </div>
          <!-- Desktop: cards de planos/valores -->
          <div id="planCards" class="plan-cards" style="display:none;"></div>

          
          <div class="service-card" id="tipoSelectCard">
            <div class="card-content">
              <h3 class="card-title">Tipo de serviço</h3>
              <div class="input-group" id="grupoTipo" style="position:relative;">
                <select id="tipoSelect" class="select-input" style="flex:1;">
                  <option value="" selected>Selecione...</option>
                  <option value="mistos">Seguidores Mistos</option>
                  <option value="brasileiros">Seguidores Brasileiros</option>
                  <option value="organicos">Seguidores Orgânicos</option>
                </select>
                <!-- Tutorial: 2/4 (selecionar rede social) -->
                <div id="tutorial1Tipo" class="tutorial-pop tutorial-pop-input" style="display:none;">
                  <div class="tutorial-pop-step">2/4</div>
                  <div class="tutorial-pop-text">Selecionar rede social</div>
                </div>
              </div>
            </div>
          </div>

          <div class="service-card" id="quantidadeSelectCard">
            <div class="card-content">
              <h3 class="card-title">Escolha o pacote</h3>
              <div class="input-group" id="grupoQuantidade" style="position:relative;">
                <select id="quantidadeSelect" class="select-input" disabled style="flex:1;">
                  <option value="">Selecione o tipo primeiro...</option>
                </select>
                <!-- Tutorial: 3/4 -->
                <div id="tutorial2Pacote" class="tutorial-pop tutorial-pop-input" style="display:none;">
                  <div class="tutorial-pop-step">3/4</div>
                  <div class="tutorial-pop-text">Selecionar o plano</div>
                </div>
              </div>
            </div>
          </div>


        </div>
      </section>

      <section class="section-block">
        <!-- Container da Etapa 2 (Dados do Pedido) -->
        <div id="perfilCard" style="display:none;">
          
          <!-- Card Visual Unificado -->
          <div class="service-card">
            <div class="card-content">
              <div style="text-align: center; margin-bottom: 1.5rem; position: relative; display: flex; flex-direction: column; align-items: center; gap: 0.5rem;">
                <button id="backToStep1Btn" type="button" style="background: none; border: none; cursor: pointer; color: var(--text-primary); padding: 0.5rem; display: flex; align-items: center; justify-content: center; border-radius: 50%; background-color: #f1f5f9;">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M19 12H5M5 12L12 19M5 12L12 5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </button>
                <h3 class="card-title" style="margin-bottom: 0; font-size: 1.5rem;">Dados do Pedido</h3>
              </div>
              <div class="card-desc">
              
              <!-- 1. Validação do Instagram -->
                <div style="margin-bottom: 0.5rem;">
                  <label style="display:block; margin-bottom:0.5rem; font-weight:600; color:#334155;">Usuário do Instagram <span style="color:#ef4444">*</span></label>
                  <div class="input-group username-group" id="grupoUsername" style="position:relative; display: flex; gap: 0.5rem;">
                    <input type="text" id="usernameCheckoutInput" placeholder="Ex: @usuario" class="select-input" maxlength="100" style="flex: 1; border-radius: 8px;" />
                    <button id="checkCheckoutButton" class="continue-button validate-btn" type="button" style="padding: 0 1.5rem; border-radius: 8px; font-weight: 600; background: var(--instagram-gradient);">
                      <span class="button-text">Buscar</span>
                      <svg class="button-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin-left: 0.4rem;">
                        <path d="M5 12H19M19 12L12 5M19 12L12 19" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                      </svg>
                    </button>
                    <div id="tutorial3Usuario" class="tutorial-pop tutorial-pop-input" style="display:none;">
                      <div class="tutorial-pop-step">3/5</div>
                      <div class="tutorial-pop-text">Cole o link do seu perfil Instagram</div>
                    </div>
                  </div>
                  <!-- Mobile styles for search input/button -->
                  <style>
                    @media (max-width: 640px) {
                        #grupoUsername { flex-direction: column; }
                        #checkCheckoutButton { width: 100%; height: 40px; min-height: 40px; margin-top: 0.5rem; }
                        #usernameCheckoutInput { width: 100%; }
                    }
                  </style>
                  <div id="perfilHints" style="margin-top:0.4rem; color: var(--text-secondary); font-size: 0.85rem;">
                    Pode inserir com ou sem @ (Ex: @usuario ou usuario). Acentos serão removidos automaticamente.
                  </div>
                  <div id="statusCheckoutMessage" class="status-message" style="display:none; margin-top:0.5rem;"></div>
                  <div id="loadingCheckoutSpinner" class="loading-spinner" style="display:none; margin-top:0.5rem;">
                    <div class="spinner"></div>
                    <p>Verificando perfil...</p>
                  </div>
                  
                  <!-- Preview do Perfil -->
                  <div id="profilePreview" style="display:none; margin-top:1rem; padding: 1rem; background: var(--bg-secondary); border-radius: 12px; border: 1px solid var(--border-color);">
                    <div style="display:flex; align-items:center; gap:1rem;">
                      <img id="checkoutProfileImage" alt="Foto" style="width:64px; height:64px; border-radius:50%; object-fit:cover; background:#fff;" />
                      <div>
                        <div style="font-weight:700; font-size:1.1rem; color: var(--text-primary);">@<span id="checkoutProfileUsername"></span></div>
                        <div id="checkoutProfileStats" style="display:flex; gap:0.8rem; font-size:0.9rem; color: var(--text-secondary); margin-top:0.2rem;">
                          <div><strong><span id="checkoutPostsCount"></span></strong> posts</div>
                          <div><strong><span id="checkoutFollowersCount">-</span></strong> seguidores</div>
                          <div><strong><span id="checkoutFollowingCount">-</span></strong> seguindo</div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- 2. Campos de Contato (Unificados no Card) -->
                <div id="contactFieldsArea" style="display:none; margin-top: 2rem; border-top: 1px solid #e2e8f0; padding-top: 1.5rem;">
                   
                   <!-- Email -->
                   <div style="margin-bottom: 1rem;">
                      <div id="emailErrorMsg" style="color:#ef4444; font-size: 0.85rem; display:none; margin-bottom: 0.2rem;">Por favor, informe um e-mail válido</div>
                      <div style="background-color: #eff6ff; padding: 0.75rem; border-radius: 8px; border: 1px solid #dbeafe; margin-bottom: 0.8rem;">
                          <span style="color: #1e40af; font-weight: 700; font-size: 0.95rem; display: block; margin-bottom: 0.3rem;">Por que pedimos esses dados?</span>
                          <p style="font-size: 0.85rem; color: #1e3a8a; margin: 0; line-height: 1.4;">Para entrar em contato com você e para você consultar os dados do seu pedido.</p>
                      </div>
                      <label for="contactEmailInput" style="display:block; margin-bottom:0.5rem; color:var(--text-primary); font-weight:500;">Email <span style="color:#ef4444">*</span></label>
                      <input type="email" id="contactEmailInput" class="select-input" placeholder="Seu melhor e-mail" style="width:100%; border-radius: 8px;" />
                   </div>

                   <!-- Telefone -->
                   <div style="margin-bottom: 2rem;">
                      <label for="contactPhoneInput" style="display:block; margin-bottom:0.5rem; color:var(--text-primary); font-weight:500;">Telefone <span style="color:#ef4444">*</span></label>
                      <div class="phone-field" style="width:100%;">
                         <input type="tel" id="contactPhoneInput" class="select-input" placeholder="(00) 00000-0000" maxlength="15" style="width:100%; border-radius: 8px;" />
                      </div>
                   </div>

                   <!-- Botão Continuar Largo (Transformado em Link para GTM) -->
                   <a href="javascript:void(0)" id="buyFollowersBtn" class="continue-button contact-continue-btn" style="width: 100%; padding: 1rem; font-size: 1.1rem; border-radius: 8px; display: flex; justify-content: center; align-items: center; background: var(--instagram-gradient); text-decoration: none; color: white; cursor: pointer;">
                      <span class="button-text">Continuar</span>
                   </a>
                </div>

              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Seção removida: contactStepSection foi integrada acima -->

      <section class="section-block">
        
        <!-- Container Etapa 3: Promoções e Pagamento -->
        <div id="step3Container" style="display:none;">

          <!-- Unified Card: Profile + Promotions -->
          <div class="service-card" id="step3ProfileCard" style="overflow: hidden; max-width: 960px; margin: 0 auto;">
            
            <!-- HEADER SECTION: Profile Info + Quantity -->
            <div style="padding: 1.5rem; border-bottom: 1px solid var(--border-color);">
               
               <!-- Botão Voltar (Absolute) -->
               <button onclick="window.goToStep && window.goToStep(2)" type="button" style="position: absolute; left: 1rem; top: 1.5rem; background: none; border: none; cursor: pointer; color: var(--text-primary); padding: 0.5rem; display: flex; align-items: center; justify-content: center; border-radius: 50%; background-color: #f1f5f9; z-index: 10;">
                   <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                     <path d="M19 12H5M5 12L12 19M5 12L12 5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                   </svg>
               </button>

               <!-- Perfil Review (Centralizado) -->
               <div style="display: flex; flex-direction: column; align-items: center; margin-bottom: 1rem;">
                  <div style="position: relative; margin-bottom: 0.5rem;">
                    <img id="reviewProfileImage" src="" alt="Perfil" style="width: 80px; height: 80px; border-radius: 50%; object-fit: cover; border: 3px solid #fff; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);" />
                    <div style="position: absolute; bottom: 0; right: 0; background: #fff; border-radius: 50%; padding: 4px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                      <svg width="16" height="16" viewBox="0 0 24 24" fill="#2563eb" xmlns="http://www.w3.org/2000/svg">
                        <path d="M9 12L11 14L15 10M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z" stroke="#2563eb" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                      </svg>
                    </div>
                  </div>
                  <div style="font-weight: 700; font-size: 1.2rem; color: var(--text-primary);">@<span id="reviewProfileUsername"></span></div>
                  <div style="display: flex; flex-direction: column; align-items: center; font-size: 0.95rem; color: var(--text-secondary); gap: 0.25rem;">
                    <div><span id="reviewProfileFollowers" style="font-weight: 600; color: var(--text-primary);">0</span> seguidores atuais</div>
                    <div><span id="reviewSelectedQty" style="font-weight: 700; color: var(--primary-purple);">+0</span> (pacote que escolhi)</div>
                    <div style="border-top: 1px solid var(--border-color); width: 60%; margin: 0.25rem 0;"></div>
                    <div style="font-size: 1.05rem; font-weight: 700; color: var(--text-primary);"><span id="reviewTotalFollowers">0</span> seguidores totais</div>
                  </div>
               </div>

               <div style="margin-top: 1rem; text-align: center; font-size: 0.95rem; color: white; background: #22c55e; padding: 0.8rem; border-radius: 12px; font-weight: 600;">
                  Finalize o pagamento e conquiste os seguidores acima
               </div>
            </div>

            <!-- PROMOTIONS SECTION (Merged) -->
            <div class="service-card" id="orderBumpInline" style="display:none;">
              <div class="card-content">
                <h3 class="card-title" style="background: linear-gradient(90deg, #8B5CF6 0%, #3B82F6 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; color: transparent; display: block; text-align: center; width: 100%;">Oferta exclusivas para você</h3>
                <div class="card-desc promo-list">
                    <!-- Upgrade dinâmico -->
                    <label class="promo-item upgrade">
                      <input type="checkbox" id="orderBumpCheckboxInline" />
                      <div class="promo-content">
                        <div class="promo-highlight" id="orderBumpHighlight">Upgrade de seguidores</div>
                        <div class="promo-title">Upgrade de pacote</div>
                        <div id="orderBumpText" class="promo-desc">Selecione um pacote para ver o upgrade disponível.</div>
                        <div class="promo-prices" data-promo="upgrade">
                          <span class="old-price">—</span>
                          <span class="discount-badge">OFERTA</span>
                          <span class="new-price">—</span>
                        </div>
                      </div>
                    </label>
                    <!-- Demais promoções -->
                    <label class="promo-item likes">
                      <input type="checkbox" id="promoLikes" data-promo="likes" />
                      <div class="promo-content">
                        <div class="promo-highlight">+ curtidas</div>
                        <div class="promo-title">Curtidas promocionais</div>
                        <div class="promo-desc">Adicionar curtidas ao post.</div>
                        <div class="promo-prices" data-promo="likes">
                          <span class="old-price">R$ 49,90</span>
                          <span class="discount-badge">80% OFF</span>
                          <span class="new-price">R$ 9,90</span>
                        </div>
                        <div class="likes-control" id="likesControl" aria-label="Quantidade de curtidas">
                          <button type="button" id="likesDec" class="likes-arrow" aria-label="Diminuir">‹</button>
                          <span id="likesQty" class="likes-qty">150</span>
                          <button type="button" id="likesInc" class="likes-arrow" aria-label="Aumentar">›</button>
                          <div id="likesPromoTip" class="tutorial-pop tutorial-pop-check" style="display:none;"><div class="tutorial-pop-text">Pode aumentar a quantidade clicando na seta</div></div>
                        </div>
                        
                      </div>
                    </label>
                    <label class="promo-item views">
                      <input type="checkbox" id="promoViews" data-promo="views" />
                      <div class="promo-content">
                        <div class="promo-highlight">+ visualizações</div>
                        <div class="promo-title">Visualizações promocionais</div>
                        <div class="promo-desc">Adicionar visualizações em Reels.</div>
                        <div class="promo-prices" data-promo="views">
                          <span class="old-price">R$ 89,90</span>
                          <span class="discount-badge">78% OFF</span>
                          <span class="new-price">R$ 19,90</span>
                        </div>
                        <div class="likes-control" aria-label="Quantidade de visualizações">
                          <button type="button" id="viewsDec" class="likes-arrow" aria-label="Diminuir">‹</button>
                          <span id="viewsQty" class="likes-qty">1000</span>
                          <button type="button" id="viewsInc" class="likes-arrow" aria-label="Aumentar">›</button>
                          
                        </div>
                        
                      </div>
                    </label>
                    <label class="promo-item comments">
                      <input type="checkbox" id="promoComments" data-promo="comments" />
                      <div class="promo-content">
                        <div class="promo-highlight">+ COMENTÁRIOS</div>
                        <div class="promo-title" style="display:flex; align-items:center; gap:0.5rem;">
                          <span>Comentário promocional</span>
                          <button id="commentsExampleBtn" class="continue-button" type="button" style="padding:0.15rem 0.5rem; font-size:12px; line-height:1;">Exemplo comentários</button>
                        </div>
                        <div class="promo-desc">1 comentário = R$ 1,50 cada.</div>
                        <div class="promo-prices" data-promo="comments">
                          <span class="old-price">R$ 29,90</span>
                          <span class="discount-badge">67% OFF</span>
                          <span class="new-price">R$ 9,90</span>
                        </div>
                        <div class="likes-control" aria-label="Quantidade de comentários">
                          <button type="button" id="commentsDec" class="likes-arrow" aria-label="Diminuir">‹</button>
                          <span id="commentsQty" class="likes-qty">1</span>
                          <button type="button" id="commentsInc" class="likes-arrow" aria-label="Aumentar">›</button>
                        </div>
                        
                      </div>
                    </label>
                    
                    <label class="promo-item warranty60">
                  <input type="checkbox" id="promoWarranty60" data-promo="warranty60" />
                  <div class="promo-content">
                    <div id="warrantyHighlight" class="promo-highlight">+ 30 DIAS DE REPOSIÇÃO</div>
                        <div class="promo-title" style="display:flex; align-items:center; gap:0.5rem;">
                          <span>Garantia estendida</span>
                          <button id="warranty60InfoBtn" class="continue-button" type="button" style="padding:0.15rem 0.5rem; font-size:12px; line-height:1;">Entenda mais</button>
                        </div>
                        <div id="warrantyDesc" class="promo-desc">Não perca mais nenhum seguidor</div>
                        <div class="promo-prices" data-promo="warranty60">
                          <span id="warrantyOldPrice" class="old-price">R$ 39,90</span>
                          <span id="warrantyDiscount" class="discount-badge">75% OFF</span>
                          <span id="warrantyNewPrice" class="new-price">R$ 9,90</span>
                        </div>
                        <div class="likes-control" aria-label="Garantia estendida">
                          <button type="button" id="warrantyModeDec" class="likes-arrow" aria-label="Anterior">‹</button>
                          <span id="warrantyModeLabel" class="likes-qty">30 dias</span>
                          <button type="button" id="warrantyModeInc" class="likes-arrow" aria-label="Próximo">›</button>
                        </div>
                      </div>
                    </label>
                </div>
              </div>
            </div>
          </div>

          <!-- RESUMO DO PEDIDO (Unified) -->
          <div class="service-card" id="resumo" style="display:none; margin-top: 1rem; max-width: 960px; margin-left: auto; margin-right: auto;">
            <div class="card-content">
              <h3 class="card-title">Resumo do pedido</h3>
              
              <div class="resumo-row">
                <span>Serviço</span>
                <span id="resTipo">-</span>
              </div>
              <div class="resumo-row">
                <span>Quantidade</span>
                <span id="resQtd">-</span>
              </div>
              <div class="resumo-row">
                <span>Valor do pacote</span>
                <span id="resPreco">-</span>
              </div>
              
              <div id="resPromosContainer" style="display:none;">
                 <div id="resPromos"></div>
              </div>
              
              <div class="resumo-total">
                <span>Total</span>
                <span id="resTotalFinal" style="color: #22c55e;">-</span>
              </div>

              <div id="grupoPedido" style="margin-top: 1.5rem; display:none;">
                <button id="realizarPedidoBtn" class="continue-button pulse-animation" style="width: 100%; padding: 1rem; font-size: 1.1rem; border-radius: 8px; display: flex; justify-content: center; align-items: center;">
                    <span class="button-text">Realizar Pagamento</span>
                    <div class="spinner" style="width: 20px; height: 20px; border-width: 2px; margin-left: 10px; display: none;"></div>
                </button>
                <p style="text-align: center; margin-top: 0.5rem; font-size: 0.85rem; color: var(--text-secondary);">
                    Ambiente 100% seguro. Liberação imediata.
                </p>
              </div>

              <!-- PIX PAYMENT SECTION (Integrated) -->
              <div id="pixContainer" style="display:none; margin-top: 1.5rem; border-top: 1px solid var(--border-color); padding-top: 1.5rem;">
                 <div style="text-align: center; margin-bottom: 1rem;">
                    <h4 style="font-size: 1.1rem; margin-bottom: 0.5rem;">Pagamento via PIX</h4>
                    <p style="font-size: 0.9rem; color: var(--text-secondary);">Aprovação imediata e liberada automaticamente.</p>
                 </div>
                 
                 <!-- QR Code Area -->
                 <div style="background: #fff; padding: 1rem; border-radius: 12px; display: inline-block; margin: 0 auto 1rem; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                    <img id="pixQrcode" src="" alt="QR Code PIX" style="width: 200px; height: 200px; display: none;" />
                    <div id="pixLoader" style="width: 200px; height: 200px; display: flex; align-items: center; justify-content: center; background: #f8fafc;">
                       <div class="spinner" style="border-color: #cbd5e1; border-top-color: var(--primary-purple);"></div>
                    </div>
                 </div>
                 
                 <!-- Copy Paste -->
                 <div class="input-group" style="margin-bottom: 1rem;">
                    <input type="text" id="pixCopiaCola" class="select-input" readonly placeholder="Aguardando código PIX..." style="text-overflow: ellipsis;" />
                    <button id="copyPixBtn" class="continue-button" style="padding: 0 1rem;">
                       <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
                    </button>
                 </div>
                 
                 <div id="pixResultado" style="margin-top: 1rem; min-height: 24px;"></div>
              </div>

              <div id="checkoutAudioContainer" style="margin-top:1.5rem; border-top: 1px solid var(--border-color); padding-top:1rem;">
                 <!-- Audio player injected by JS -->
              </div>
              
            </div>
          </div>
        </div>
      </section>

      <!-- Modal: Garantia 60 dias (Estilo Modal Overlay) -->
      <div id="warranty60Modal" class="modal-overlay" style="display:none;">
        <div class="modal-dialog">
          <div class="modal-header">
            <h3 class="modal-title">Garantia estendida</h3>
            <button id="warranty60CloseBtn" class="modal-close" type="button" aria-label="Fechar">✕</button>
          </div>
          <div class="modal-body">
            <p style="margin-top:0.75rem; color: var(--text-secondary);">Apenas com 4 cliques e menos de 30 segundos basta a pessoa colocar o id do pedido de serviço dela no nosso sistema, e clicar no botão solicitar refil e ela recupera a quantidade de seguidores que teve queda.</p>
            <div id="warrantyGifSlot" style="display:flex; align-items:center; justify-content:center; min-height:160px; margin-top: 1rem;">
               <img src="/images/reposicao.jpeg" alt="Garantia de Reposição" style="max-width:100%; border-radius:8px;">
            </div>
          </div>
          <div class="modal-footer">
            <button id="warranty60CloseBtn2" class="continue-button" type="button">Fechar</button>
          </div>
        </div>
      </div>

      <!-- Modal: Exemplo de comentários (Estilo Modal Overlay) -->
      <div id="commentsExampleModal" class="modal-overlay" style="display:none; align-items:center; justify-content:center; z-index:9999;">
        <div class="modal-dialog" style="max-width:400px; width:90%; border-radius: 16px; padding: 1.5rem; position:relative; display:flex; flex-direction:column;">
          <div class="modal-header" style="border:none; padding-bottom:0;">
            <h3 class="modal-title" style="margin:0 auto;">Exemplo de Comentários</h3>
            <button id="commentsExampleCloseBtn" class="modal-close" type="button" aria-label="Fechar" style="position:absolute; right:1rem; top:1rem;">✕</button>
          </div>
          <div class="modal-body" style="text-align:center;">
            <div style="position:relative; aspect-ratio: 9 / 16; height: clamp(320px, 60vh, 560px); max-width: 100%; margin: 0.75rem auto 0; border-radius:12px; overflow:hidden; box-shadow: var(--shadow); background: #000;">
              <video id="commentsVideoPlayer" src="/images/comentarios.mp4" controls muted playsinline style="position:absolute; inset:0; width:100%; height:100%; object-fit: cover;"></video>
            </div>
            <p style="margin-top:0.75rem; color: var(--text-secondary);">Comentários de perfis brasileiros, alta qualidade, comentários positivos e sem queda.</p>
          </div>
          <div class="modal-footer">
            <button id="commentsExampleCloseBtn2" class="continue-button" type="button">Fechar</button>
          </div>
        </div>
      </div>

      <!-- Modal: Explicação da Ferramenta (Estilo Modal Overlay) -->
      <div id="toolExplanationModal" class="modal-overlay" style="display:none; align-items:center; justify-content:center; z-index:9999;">
        <div class="modal-dialog" style="max-width:400px; width:90%; background: #1e1e1e; border-radius: 16px; padding: 1.5rem; position:relative; display:flex; flex-direction:column;">
          <div class="modal-header" style="border:none; padding-bottom:0;">
            <h3 class="modal-title" style="margin:0 auto;">Como funciona?</h3>
            <button id="toolExplanationCloseBtn" class="modal-close" type="button" aria-label="Fechar" style="position:absolute; right:1rem; top:1rem;">✕</button>
          </div>
          <div class="modal-body" style="text-align:center;">
            <div style="position:relative; aspect-ratio: 9 / 16; height: clamp(320px, 60vh, 560px); max-width: 100%; margin: 0.75rem auto 0; border-radius:12px; overflow:hidden; box-shadow: var(--shadow); background: #000;">
              <!-- TODO: Substituir src pelo video correto da ferramenta -->
              <video id="toolVideoPlayer" src="/images/comentarios.mp4" controls muted playsinline style="position:absolute; inset:0; width:100%; height:100%; object-fit: cover;"></video>
            </div>
            <p style="margin-top:0.75rem; color: var(--text-secondary);">Entenda como nossa tecnologia exclusiva garante a reposição automática.</p>
          </div>
          <div class="modal-footer">
            <button id="toolExplanationCloseBtn2" class="continue-button" type="button">Fechar</button>
          </div>
        </div>
      </div>
      <!-- Modal: Seleção de post (curtidas/visualizações/comentários) -->
      <div id="postSelectModal" class="modal-overlay" style="display:none;">
        <div class="modal-dialog">
          <div class="modal-header">
            <h3 id="postModalTitle" class="modal-title">Selecionar post</h3>
            <button id="postModalClose" class="modal-close" type="button" aria-label="Fechar">✕</button>
          </div>
          <div class="modal-body">
            <div id="postModalGrid" class="post-grid"></div>
          </div>
          <div class="modal-footer">
            <button id="postModalClose2" class="continue-button" type="button">Fechar</button>
          </div>
        </div>
      </div>

    </main>
    <footer class="footer">
      <div class="footer-bar">
        <a href="https://instagram.com/agencia.oppus" target="_blank" rel="noopener" class="footer-link instagram-link" aria-label="Instagram Agência OPPUS">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M7 2h10a5 5 0 015 5v10a5 5 0 01-5 5H7a5 5 0 01-5-5V7a5 5 0 015-5zm0 2a3 3 0 00-3 3v10a3 3 0 003 3h10a3 3 0 003-3V7a3 3 0 00-3-3H7zm5 3a5 5 0 110 10 5 5 0 010-10zm0 2a3 3 0 100 6 3 3 0 000-6zm5.5-3a1.5 1.5 0 110 3 1.5 1.5 0 010-3z"/></svg>
        </a>
        <span class="footer-center">&copy; 2025 Agência OPPUS. Todos os direitos reservados.</span>
        <a href="/termos" id="termsLink" class="footer-link">Termos de Uso</a>
      </div>
    </footer>
  </div>

   <script src="/js/main.js"></script>
   <script src="/js/why-us.js"></script>
   <script src="/js/servicos-instagram.js?v=<%= Date.now() %>"></script>
   <div id="toastContainer" class="toast-container"></div>
  <div id="termsPage" class="client-page" aria-label="Termos de Uso" style="display:none;">
    <div class="client-page-inner">
      <h2 class="client-title">Termos de Uso</h2>
      <p class="client-desc">Exemplo de termos. Substitua por seu conteúdo oficial.</p>
      <div style="color: var(--text-primary); line-height: 1.6; max-width: 720px; margin: 0 auto;">
        <p>Bem-vindo à Agência OPPUS. Ao utilizar nossos serviços, você concorda com estes termos. Este texto é um exemplo e deverá ser substituído pelos seus termos oficiais.</p>
        <p>1. Uso do serviço: você se compromete a utilizar de forma lícita e ética.</p>
        <p>2. Pagamentos e reembolsos: políticas aplicáveis conforme legislação vigente.</p>
        <p>3. Privacidade: tratamos seus dados conforme nossa política de privacidade.</p>
      </div>
      <div class="client-actions" style="margin-top: 1rem;">
        <button id="termsCloseBtn" class="continue-button"><span class="button-text">Fechar</span></button>
      </div>
    </div>
  </div>

  <style>
    /* Título do Checkout com especificações fornecidas */
    .checkout-page .title {
      font-size: clamp(2.75rem, 5.2vw, 4rem);
      font-weight: 700;
      color: #FFFFFF;
      margin-bottom: 0.6rem;
      letter-spacing: -0.02em;
    }
    .checkout-page .main-content { max-width: 1440px; width: 100%; margin: 0 auto; }

    /* Ampliar área de conteúdo e larguras dos cards no desktop */
    @media (min-width: 1024px) {
      .checkout-page.container { max-width: 100%; width: 100%; }
      .checkout-page .main-content { max-width: 1440px; width: 100%; margin: 0 auto; }
      .checkout-page .subtitle { 
        text-align: center;
        color: var(--text-secondary);
        font-size: 1rem;
        line-height: 1.5;
        margin-bottom: 0.4rem; 
      }
      .checkout-page .service-card { width: 100%; padding: 0.55rem 0.7rem; }
      .checkout-page .card-content { gap: 0.2rem; }
      /* Desktop: reduzir levemente os cards de planos (quantidade/preço) */
      .checkout-page #planCards .service-card { min-height: 130px; }
      .checkout-page #planCards .card-title { font-size: 1.15rem; }
      .checkout-page #planCards .card-desc { font-size: 1.05rem; }
      /* Desktop: aumentar título e botões da plataforma */
      .checkout-page #plataformaCard .card-title { font-size: calc(clamp(2.75rem, 5.2vw, 3.75rem) - 2px); }
      .checkout-page #plataformaCard .card-desc { font-size: calc(1.25rem - 2px); }
      .checkout-page .platform-btn { padding: 1.2rem 1.6rem; font-size: 1.15rem; }
      .checkout-page .select-input {
        background: rgba(255, 255, 255, 0.95);
        color: #111827;
        width: 100%;
        margin-top: 0.1rem; /* mais rente às bordas do card */
        /* aumenta área útil horizontal no desktop */
        padding-left: 0.9rem;
        padding-right: 0.9rem;
      }
      .checkout-page .input-group { width: 100%; }
      .checkout-page .input-group { max-width: 820px; }

      /* Desktop-only: esconder selects de tipo/quantidade e usar cards */
      #grupoTipo, #grupoQuantidade { display: none; }
      #tipoCards, #planCards { display: grid !important; }
      #tipoCards { grid-template-columns: repeat(3, 1fr) !important; gap: 0.8rem; }
      #planCards { grid-template-columns: repeat(3, 1fr) !important; gap: 0.8rem; }
      #tipoCards .card-title { font-size: 1.1rem; }
      #tipoCards .card-desc { font-size: 1rem; }
      .option-card, .plan-card {
        background: var(--bg-secondary);
        border: 1px solid var(--border-color);
        border-radius: 14px;
        padding: 0.6rem 0.8rem;
        color: var(--text-primary);
        box-shadow: var(--shadow-sm);
        cursor: pointer;
        transition: transform 0.2s ease, box-shadow 0.2s ease, border-color 0.2s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        text-align: center;
        flex-direction: column;
      }
      .option-card .card-content, .plan-card .card-content { display: flex; align-items: center; justify-content: center; flex-direction: column; width: 100%; height: 100%; text-align: center; }
      .option-card:hover, .plan-card:hover { transform: translateY(-2px); box-shadow: var(--shadow-md); border-color: #6B46C1; }
      .option-card.active, .plan-card.active { border-color: #6B46C1; box-shadow: var(--shadow-md); }
      .plan-card .plan-title { font-weight: 600; }
      .plan-card .plan-sub { color: var(--text-secondary); font-size: 0.95rem; }
      .site-brand { left: 16rem; }
      #audioCard .card-content { align-items: stretch; }
      #audioCard .audio-player { width: 100%; }
      #audioCard .audio-controls { width: 100%; }
      #audioCard .audio-progress { height: 6px; }
      #tipoDescCard .card-desc { font-size: calc(1rem + 2px); }
      #resumo .card-desc { font-size: calc(1rem + 2px); }
      .phone-label { font-size: calc(1rem + 2px); }
      .phone-hint { font-size: calc(0.875rem + 2px); }
    }
    /* Garantir largura total dos inputs no mobile e desktop */
    .checkout-page .input-group { width: 100%; }
    @media (min-width: 1024px) { .checkout-page .input-group { max-width: 700px; } }
    .checkout-page .select-input { width: 100%; }
    .cards-grid.checkout-grid { gap: 1.25rem; grid-template-columns: 1fr; }
    @media (min-width: 1024px) { .cards-grid.checkout-grid { grid-template-columns: 1fr; max-width: 1440px; margin: 0 auto; } }
      /* Subtitle unified style */
      .checkout-page .subtitle { 
        text-align: center;
        color: var(--text-secondary);
        font-size: 1rem;
        line-height: 1.5;
        margin-bottom: 0.4rem; 
      }
    /* Notificação de venda (toast) um pouco maior na Home */
    .toast-container .toast-item { font-size: 1.05rem; padding: 0.8rem 1.05rem; }
    .checkout-page .select-input option { color: #111827; }
    /* Centralizar área de resultado PIX */
    #pixResultado { text-align: center; }

    /* Cards do checkout: usar cards em todas as visões e esconder selects originais */
    #tipoSelectCard, #quantidadeSelectCard { display: none; }
    #grupoTipo, #grupoQuantidade { display: none !important; }
      #tipoCards, #planCards { display: grid !important; gap: 0.75rem; grid-template-columns: 1fr; }
      #tipoCards .service-card, #planCards .service-card { min-height: 50px; }
    @media (min-width: 640px) { #tipoCards, #planCards { grid-template-columns: repeat(2, 1fr); } }
    @media (min-width: 1024px) { #tipoCards, #planCards { grid-template-columns: repeat(3, 1fr); } }
      .service-card.active { border-color: var(--primary-purple); box-shadow: 0 0 0 3px rgba(107,70,193,0.35); }

    @media (max-width: 639px) {
      #tipoCards { grid-template-columns: repeat(3, 1fr) !important; gap: 0.5rem; }
      #planCards { grid-template-columns: 1fr !important; gap: 0.5rem; }
      #tipoCards .option-card, #planCards .plan-card { width: 100%; min-height: 90px; }
      #tipoCards .card-title, #planCards .card-title { font-size: 0.9rem; line-height: 1.2; }
      #tipoCards .card-desc, #planCards .card-desc { font-size: 0.85rem; }
    }
    @media (min-width: 1024px) {
      #tipoCards .service-card { min-height: 120px; }
    }
    /* Card de descrição do tipo */
    #tipoDescCard .card-desc p { margin: 0.4rem 0; }
    #tipoDescCard .card-desc ul { margin: 0.5rem 0 0.25rem; padding-left: 1rem; }
    #tipoDescCard .card-desc li { margin: 0.2rem 0; }

    /* Centralizar texto nos cards de seguidores (tipo) */
    #tipoCards .card-content { text-align: center; }
    #tipoCards .card-title { text-align: center; }
    #tipoCards .card-desc { text-align: center; }

    #plataformaCard { background: transparent; border: none; box-shadow: none; padding: 0; }
    #plataformaCard .card-content { align-items: center; }
    #plataformaCard .card-title { font-size: calc(clamp(2.5rem, 5vw, 3.25rem) - 2px); font-weight: 700; letter-spacing: -0.02em; color: #FFFFFF; text-align: center; margin-bottom: 0.4rem; }
    #plataformaCard .card-desc { text-align: center; }
    #plataformaCard .platform-toggle { display: flex; justify-content: center; gap: 1rem; margin-top: 0.5rem; margin-bottom: 1.25rem; }
    .checkout-page .platform-btn { padding: 1rem 1.35rem; font-size: 1rem; }
    
    .testimonials-title { font-family: var(--font-family); font-weight: 700; }

    @media (max-width: 640px) {
      .footer .footer-bar { flex-direction: column; gap: 0.4rem; }
      .footer .footer-center { order: 3; }
    }
    #postSelectModal.modal-overlay { position: fixed; inset: 0; display: none; align-items: center; justify-content: center; background: rgba(0,0,0,0.92); z-index: 1000; }
    #postSelectModal .modal-dialog { width: 98vw; max-width: 1600px; max-height: calc(100vh - 2rem); overflow: auto; aspect-ratio: 16 / 9; height: auto; }
    #postModalGrid.post-grid { display: grid; gap: 12px; grid-template-columns: repeat(2, 1fr); }
    @media (min-width: 1024px) { #postModalGrid.post-grid { grid-template-columns: repeat(4, 1fr); } }
    .media-frame { position: relative; border-radius: 8px; overflow: hidden; background: #000; aspect-ratio: 16/9; }
    .selected-mark { outline: 2px solid #7c3aed; border-radius: 8px; }
    #postModalGrid.post-grid .inline-msg { font-size: 12px; color: var(--text-secondary); text-align: center; }
    #postModalGrid.post-grid .continue-button { justify-content: center; }
    @media (min-width: 1024px) { #postModalGrid.post-grid .inline-msg { font-size: 12px; } }
    .media-frame > img, .media-frame > video, .media-frame > iframe { position: absolute; inset: 0; width: 100%; height: 100%; object-fit: cover; border: none; }
    @media (max-width: 640px) { #postSelectModal.modal-overlay { align-items: flex-start; } #postSelectModal .modal-dialog { width: 100%; max-width: 95vw; margin-top: 1rem; aspect-ratio: 9 / 16; height: 80vh; } .media-frame { aspect-ratio: 9/16; max-height: 200px; } #postModalGrid.post-grid .inline-msg { font-size: 11px; } }

    /* Estilos específicos para a página de serviços do Instagram (Fonte Maior) */
    .page-instagram-services .plan-quantity {
      font-size: 3.5rem !important;
      font-weight: 800;
      color: #1e293b;
      line-height: 1;
      margin-top: 0.5rem;
    }
    .page-instagram-services .plan-service-type {
      font-size: 1.25rem !important;
      color: #64748b;
      font-weight: 600;
      margin-bottom: 0.5rem;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    .page-instagram-services .plan-price {
      font-size: 2.5rem !important;
      font-weight: 800;
      color: #0f172a;
      line-height: 1.1;
    }
    .page-instagram-services .plan-old-price {
      font-size: 1rem;
      text-decoration: line-through;
      color: #94a3b8;
      margin-right: 0.5rem;
    }
    .page-instagram-services .plan-icon {
        font-size: 3.5rem;
        margin-bottom: 0.5rem;
    }
    /* Custom Modal Styles (copied from #postSelectModal) */
    
    /* Stepper Styles */
    .stepper-container {
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 2rem;
      width: 100%;
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
      padding: 0 1rem;
    }
    .step {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0.5rem;
      position: relative;
      z-index: 2;
    }
    .step-circle {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      background: var(--bg-secondary);
      border: 2px solid var(--border-color);
      color: var(--text-secondary);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      transition: all 0.3s ease;
    }
    .step.active .step-circle {
      background: var(--primary-purple);
      border-color: var(--primary-purple);
      color: #fff;
      box-shadow: 0 0 0 4px rgba(107, 70, 193, 0.2);
    }
    .step.completed .step-circle {
      background: #22c55e;
      border-color: #22c55e;
      color: #fff;
    }
    .step-label {
      font-size: 0.85rem;
      font-weight: 600;
      color: var(--text-secondary);
      transition: color 0.3s ease;
    }
    .step.active .step-label { color: var(--text-primary); }
    .step-line {
      flex: 1;
      height: 2px;
      background: var(--border-color);
      margin: 0 10px;
      margin-bottom: 1.4rem;
      transition: background 0.3s ease;
    }
    .step.active + .step-line,
    .step.completed + .step-line {
      background: var(--primary-purple); /* ou verde se completed */
    }
    #postSelectModalCustom.modal-overlay { position: fixed; inset: 0; display: none; align-items: center; justify-content: center; background: rgba(0,0,0,0.92); z-index: 1000; }
    #postSelectModalCustom .modal-dialog { width: 98vw; max-width: 1600px; max-height: calc(100vh - 2rem); overflow: auto; aspect-ratio: 16 / 9; height: auto; }
    @media (max-width: 640px) { 
      #postSelectModalCustom.modal-overlay { align-items: flex-start; } 
      #postSelectModalCustom .modal-dialog { width: 100%; max-width: 95vw; margin-top: 1rem; aspect-ratio: 9 / 16; height: 80vh; } 
    }
    /* Estilos de layout solicitados (Mobile/Desktop) */
    
    /* Novos estilos para campos de contato (Estilo "Linha/Box") */
    .field-box-container {
      background-color: #f8fafc;
      border: 1px solid #e2e8f0;
      border-radius: 12px;
      padding: 0.2rem 1rem;
      display: flex;
      align-items: center;
      gap: 1rem;
      margin-bottom: 1rem;
      transition: border-color 0.2s;
    }
    .field-box-container:focus-within {
      border-color: var(--primary-purple);
      box-shadow: 0 0 0 3px rgba(107, 70, 193, 0.1);
    }
    .field-icon {
      color: var(--text-secondary);
      display: flex;
      align-items: center;
    }
    .field-input-wrapper {
      flex: 1;
      display: flex;
      flex-direction: column;
    }
    .field-label {
      font-size: 0.75rem;
      color: var(--text-secondary);
      font-weight: 600;
      margin-bottom: 0px;
    }
    .field-input {
      border: none;
      background: transparent;
      padding: 0.2rem 0;
      font-size: 1rem;
      color: var(--text-primary);
      width: 100%;
      outline: none;
    }
    .field-input::placeholder {
      color: #94a3b8;
    }
    
    .contact-continue-btn {
      background: linear-gradient(135deg, #10b981 0%, #059669 100%);
      box-shadow: 0 4px 6px -1px rgba(16, 185, 129, 0.3), 0 2px 4px -1px rgba(16, 185, 129, 0.15);
      border: none;
      transition: transform 0.2s, box-shadow 0.2s;
    }
    .contact-continue-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 15px -3px rgba(16, 185, 129, 0.4), 0 4px 6px -2px rgba(16, 185, 129, 0.2);
    }
    .contact-continue-btn:active {
      transform: translateY(0);
    }
  </style>
</body>
</html>
